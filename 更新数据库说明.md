# 更新数据库 - 添加用户角色字段

## 执行以下命令

```bash
cd nba_backend
python manage.py makemigrations
python manage.py migrate
```

## 说明

添加了 `role` 字段到用户表：
- `user` - 普通用户（默认）
- `admin` - 管理员

## 设置管理员

### 方法1：通过Django Admin
1. 创建超级管理员（如果还没有）：
```bash
python manage.py createsuperuser
```

2. 访问 http://127.0.0.1:8000/admin
3. 登录后找到用户，修改 role 字段为 admin

### 方法2：通过Django Shell
```bash
python manage.py shell
```

然后执行：
```python
from accounts.models import User

# 将某个手机号的用户设置为管理员
user = User.objects.get(phone='13800138000')
user.role = 'admin'
user.save()

# 或者创建一个管理员用户
User.objects.create(
    username='admin',
    phone='13900139000',
    role='admin'
)
```

### 方法3：注册时指定（仅用于测试）
在注册API中临时添加管理员账号判断（生产环境不推荐）
