# 精彩回放功能 - 快速启动指南

## 第一步：初始化数据库

在 MySQL 中执行以下命令：

```sql
-- 1. 创建表结构
source 创建精彩回放表.sql;

-- 2. 插入测试数据
source 插入精彩回放测试数据.sql;
```

或者直接在 MySQL 命令行中：

```bash
mysql -u root -p123456 nba_platform < 创建精彩回放表.sql
mysql -u root -p123456 nba_platform < 插入精彩回放测试数据.sql
```

## 第二步：运行后端迁移

```bash
cd nba_backend

# 创建迁移文件
python manage.py makemigrations highlights

# 执行迁移
python manage.py migrate

# 启动后端服务
python manage.py runserver
```

## 第三步：启动前端

```bash
cd nba-data-shop-platform

# 如果还没安装依赖
npm install

# 启动开发服务器
npm run dev:h5
```

## 第四步：访问功能

### 用户端访问：
1. 打开浏览器访问前端地址（通常是 http://localhost:5173）
2. 在首页导航栏点击"精彩回放"
3. 浏览和播放精彩视频

### 管理员端访问：
1. 使用管理员账号登录
2. 点击右上角进入"管理后台"
3. 点击"精彩回放管理"
4. 可以添加、编辑、删除精彩回放

## 注意事项

1. **视频URL**: 测试数据中的视频URL是示例地址，实际使用时需要：
   - 方案A：将视频文件放到后端的 media 目录，配置 Django 的静态文件服务
   - 方案B：使用在线视频地址（如云存储的公网URL）

2. **封面图片**: 同样需要使用实际的图片地址

3. **数据库连接**: 确保 `nba_backend/nba_backend/settings.py` 中的数据库配置正确

## 测试流程

1. ✅ 创建数据库表
2. ✅ 插入测试数据
3. ✅ 后端迁移成功
4. ✅ 前端页面正常显示
5. ✅ 管理员可以添加/编辑/删除
6. ✅ 用户可以浏览和播放视频
7. ✅ 观看次数正常统计

## 常见问题

### Q: 视频无法播放？
A: 检查视频URL是否正确，确保视频文件可访问

### Q: 管理员后台看不到精彩回放管理？
A: 确保使用管理员账号登录（role='admin'）

### Q: 数据库迁移失败？
A: 检查 highlights 应用是否已添加到 INSTALLED_APPS

### Q: 前端页面报错？
A: 检查后端API是否正常运行，查看浏览器控制台错误信息
